#!/bin/bash
SUDO_PASSWORD=1

RED='\033[0;31m'
BOLD_RED='\033[1;31m'
GREEN='\033[0;32m'
BOLD_GREEN='\033[1;32m'
BLUE='\033[0;34m'
BOLD_BLUE='\033[1;34m'
NC='\033[0m'

timestamp() {
    date +"%Y.%m.%d %H:%M:%S %Z"
}

timestamp_echo() {
    echo -e "${BOLD_BLUE}[$(timestamp)]${NC} ${BOLD_GREEN}$*${NC}"
}

# init sudo password
echo ${SUDO_PASSWORD} | sudo -S echo "Automatically entered sudo password"
timestamp_echo 'apt update & upgrade'
sudo apt update
sudo apt upgrade -y

timestamp_echo 'install ca-certificates curl gnupg openssh-server wireguard resolvconf vlc'
sudo apt install -y ca-certificates curl gnupg openssh-server wireguard resolvconf vlc

timestamp_echo 'Ubuntu version check disable (22.04 window)'
sudo sed -i '/^Prompt=/c\Prompt=never' /etc/update-manager/release-upgrades

timestamp_echo 'Auto update disable'
sudo sed -i 's/^APT::Periodic::Update-Package-Lists.*/APT::Periodic::Update-Package-Lists "0";/' /etc/apt/apt.conf.d/20auto-upgrades
sudo sed -i 's/^APT::Periodic::Unattended-Upgrade.*/APT::Periodic::Unattended-Upgrade "0";/' /etc/apt/apt.conf.d/20auto-upgrades

timestamp_echo 'Apport disable'
sudo sed -i '/^enabled=/c\enabled=0' /etc/default/apport

timestamp_echo 'printer auto search disable'
sudo systemctl stop cups-browsed
sudo systemctl disable cups-browsed

timestamp_echo 'black screen disable'
/usr/bin/gsettings set org.gnome.desktop.session idle-delay 0

timestamp_echo 'screen lock disable'
/usr/bin/gsettings set org.gnome.desktop.screensaver lock-delay 0
/usr/bin/gsettings set org.gnome.desktop.screensaver lock-enabled false
/usr/bin/gsettings set org.gnome.desktop.screensaver ubuntu-lock-on-suspend false

timestamp_echo 'suspend disable'
/usr/bin/gsettings set org.gnome.settings-daemon.plugins.power sleep-inactive-ac-type 'nothing'

timestamp_echo 'power button disable'
/usr/bin/gsettings set org.gnome.settings-daemon.plugins.power power-button-action 'nothing'
